{% extends 'base.html' %}
{% load static %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - {{ user.username }} | CookBook{% endblock %}

{% block content %}
<div class="profile-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="profile-header">
        <div class="profile-avatar-section">
            <div class="avatar-container">
                {% if profile.avatar %}
                    <img src="{{ profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä {{ user.username }}" class="profile-avatar">
                {% else %}
                    <div class="avatar-placeholder">
                        {{ user.username|first|upper }}
                    </div>
                {% endif %}
            </div>
            <div class="profile-info">
                <h1 class="profile-username">{{ user.username }}</h1>
                {% if profile.bio %}
                    <p class="profile-bio">{{ profile.bio }}</p>
                {% else %}
                    <p class="profile-bio-empty">–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è</p>
                {% endif %}
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-number">{{ user_recipes_count }}</span>
                        <span class="stat-label">–†–µ—Ü–µ–ø—Ç–æ–≤</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">{{ favorites_count }}</span>
                        <span class="stat-label">–í –∏–∑–±—Ä–∞–Ω–Ω–æ–º</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">{{ user.date_joined|date:"Y" }}</span>
                        <span class="stat-label">–ì–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="profile-content">
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="profile-card">
            <h2 class="card-title">üë§ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</span>
                    <span class="info-value">{{ user.username }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Email:</span>
                    <span class="info-value">{{ user.email|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
                    <span class="info-value">{{ user.date_joined|date:"d.m.Y" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:</span>
                    <span class="info-value">{{ user.last_login|date:"d.m.Y H:i" }}</span>
                </div>
            </div>
        </div>

        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="profile-card">
            <h2 class="card-title">üìç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</span>
                    <span class="info-value">{{ profile.location|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</span>
                    <span class="info-value">{{ profile.birth_date|date:"d.m.Y"|default:"–ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–í–µ–±-—Å–∞–π—Ç:</span>
                    <span class="info-value">
                        {% if profile.website %}
                            <a href="{{ profile.website }}" target="_blank">{{ profile.website }}</a>
                        {% else %}
                            –ù–µ —É–∫–∞–∑–∞–Ω
                        {% endif %}
                    </span>
                </div>
                <div class="info-item">
                    <span class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
                    <span class="info-value">{{ profile.phone|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}</span>
                </div>
            </div>
        </div>

        <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
        <div class="profile-card">
            <h2 class="card-title">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            <div class="action-buttons">
                <a href="{% url 'recipe_list' %}" class="action-btn primary">
                    <span class="action-icon">üìñ</span>
                    <span>–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã</span>
                </a>
                <a href="{% url 'favorite_list' %}" class="action-btn secondary">
                    <span class="action-icon">‚ù§Ô∏è</span>
                    <span>–ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ</span>
                </a>
                <a href="/admin/" class="action-btn tertiary">
                    <span class="action-icon">‚öôÔ∏è</span>
                    <span>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</span>
                </a>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
        <div class="profile-card">
            <h2 class="card-title">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h2>
            <form method="post" enctype="multipart/form-data" class="profile-form">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="{{ form.avatar.id_for_label }}">–ê–≤–∞—Ç–∞—Ä:</label>
                    {{ form.avatar }}
                    {% if form.avatar.errors %}
                        <div class="error">{{ form.avatar.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.bio.id_for_label }}">–û —Å–µ–±–µ:</label>
                    {{ form.bio }}
                    {% if form.bio.errors %}
                        <div class="error">{{ form.bio.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="{{ form.location.id_for_label }}">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</label>
                        {{ form.location }}
                    </div>
                    <div class="form-group">
                        <label for="{{ form.birth_date.id_for_label }}">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
                        {{ form.birth_date }}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="{{ form.website.id_for_label }}">–í–µ–±-—Å–∞–π—Ç:</label>
                        {{ form.website }}
                    </div>
                    <div class="form-group">
                        <label for="{{ form.phone.id_for_label }}">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                        {{ form.phone }}
                    </div>
                </div>

                <button type="submit" class="btn-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}